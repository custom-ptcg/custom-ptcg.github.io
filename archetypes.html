<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Archetypes - Custom PTCG</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Custom PTCG Archetypes</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="archetypes.html">Archetypes</a>
    </nav>
  </header>

  <main>
    <h2>Archetype List</h2>
    <table id="archetype-table">
      <thead>
        <tr>
          <th>Archetype</th>
          <th>Main Cards</th>
          <th>Tournament Wins</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h2>Optional Upload</h2>
    <input type="file" id="csv-upload" accept=".csv">
  </main>

  <script>
    async function loadArchetypes() {
      const response = await fetch("archetypes.json");
      const data = await response.json();
      const tbody = document.querySelector("#archetype-table tbody");

      data.forEach(arch => {
        const row = document.createElement("tr");

        // Archetype link
        const nameCell = document.createElement("td");
        nameCell.innerHTML = `<a href="archetypes/${arch.slug}.html">${arch.name}</a>`;
        row.appendChild(nameCell);

        // Main cards (thumbnails clickable)
        const cardsCell = document.createElement("td");
        arch.cards.forEach(card => {
          const img = document.createElement("img");
          img.src = card.image;
          img.alt = card.name;
          img.style.width = "40px";
          img.style.marginRight = "5px";
          img.onclick = () => window.open(card.image, "_blank");
          cardsCell.appendChild(img);
        });
        row.appendChild(cardsCell);

        // Tournament wins
        const winsCell = document.createElement("td");
        winsCell.textContent = arch.wins;
        row.appendChild(winsCell);

        // Notes
        const notesCell = document.createElement("td");
        notesCell.textContent = arch.notes;
        row.appendChild(notesCell);

        tbody.appendChild(row);
      });
    }

    // Optional CSV upload
    document.getElementById("csv-upload").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(ev) {
        localStorage.setItem("uploadedCSV", ev.target.result);
        alert("CSV stored locally! Refresh page to see changes.");
      };
      reader.readAsText(file);
    });

    loadArchetypes();
  </script>
</body>
</html>

